---
title: "شبکه سرور"
---

# شبکه 

### جدول محتوا

## بررسی اجمالی
<div id="61423523078"><script type="text/JavaScript" src="https://www.aparat.com/embed/AFji2?data[rnddiv]=61423523078&data[responsive]=yes"></script></div>

در پنل شبکه سرور پچیم شما می‌توانید شبکه سرورهای متصل به هم و فایروال سرورتان را مدیریت کنید. مدیریت درست هر کدام می‌تواند باعث حفظ و افزایش امنیت سرورهای شما شود. 




## شبکه سرورها

با استفاده از بخش ارتباط بین سرورها شما می‌توانید با دردسر بسیار کمتری سرورهای مختلف را به هم متصل کنید. برای مثال شما برای ایجاد یک پروژه مقیاس پذیر، سرور وب خود را از سرورهای دیتابیس و کش جدا کرد‌ه‌اید حالا برای آنکه این سرورها بتوانند با هم ارتباط برقرار کنند نیاز است از طریق این بخش ارتباط بین انها را ایجاد کنید. 

شما تنها می‌توانید سرورهای را به هم متصل کنید که توسط یک کاربر ایجاد شده باشند، شما نمی‌توانید از این بخش سرورهای خود را به سرورهای اکانت دیگر متصل کنید.

اگر سرورهای شما با استفاده از Ip خصوصی به هم متصل هستند و یک شبکه خصوصی را شکل داده‌اند زمانی که یک سرور را به سرور دیگر متصل می‌کنید این اتصال با استفاده از Ip خصوصی سرورها انجام می‌شود و شما نیاز نیست کار اضافه‌ای انجام دهید. اما اگر سروری IP خصوصی نداشته باشد از Ip عمومی آن استفاده خواهد شد.

## فایروال 

در هر سیستمی فایروال بخش مهمی از ارتباط آن سیستم را کنترل می‌کند شما نیز از طریق پنل پچیم می‌توانید به سادگی فایروال سرورهای خود را کنترل کنید. شما می‌توانید یک پورت را برای همه باز کنید یا برای همه ببندید یا اینکار را برای یک IP بخصوصی انجام دهید.

:::note{.tip}
::title[تغییر دستی قوانین فایروال]

توجه داشته باشید اگر بر روی سرور خود با استفاده از `ufw` تغییر در قوانین فایروال به وجود آورید این تغییرات در پنل پچیم نمایش داده نخواهند شد.

:::

### بازه پورت

زمانی که یک قانون جدید به فایروال خود اضافه می‌کنید می‌توانید در قسمت پورت یک بازه از پورت‌ها را مشخص کنید برای مثال `3000:4000` معنی این مقدار این است که بازه پورت‌های بین عدد 3000 تا 4000 هر پورتی بود شامل قانون مورد نظر شود.

### قانون اجازه / رد

هر قانونی که اضافه می‌کنید میتواند حالت **اجازه** یا **رد** را داشته باشد. اجازه به این معنیست که هر مقداری که با آن قانون هماهنگ باشه اجازه استفاده را دارد و ترافیک به سرور شما وارد می‌شود و در صورت رد از ورود ترافیک به سرور شما جلوگیری می‌شود.

:::note{.tip}
::title[اولویت بالاتر قانون رد]

توجه داشته باشید اگر دو قانون کاملا یکسان در سیستم بوجود آوردید که یکی از آن‌ها در مورد اجازه دادن و دیگری در مورد رد ترافیک باشند آن قانونی که در مورد رد کردن است اولویت بالاتری نسبت به اجازه دادن دارد.

:::

## قوانین پیش فرض فایروال

به عنوان بخشی از پروسه راه اندازی سرور، بر اساس نوع سرور پچیم قوانینی را به سرور شما اضافه می‌کند.

- SSH - اجازه میدهد از هر IP بتوانید به پورت 22 سرور دسترسی داشته باشید.
- HTTP - اجازه میدهد از هر IP بتوانید به پورت 80 سرور دسترسی داشته باشید.
- HTTPS - اجازه میدهد از هر IP بتوانید به پورت 443 سرور دسترسی داشته باشید. 

 توجه کنید که در سرورهای متفاوت قوانین پیش فض می‌تواند متفاوت باشد. اما قانون SSH همیشه در هر سروری ثابت است، البته توجه داشته باشید اضافه کردن قانون SSH به این معنی نیست که هر شخصی با درخواست به پورت 22 می‌تواند به سرور شما متصل شود بلکه حتما برای دسترسی به سرور باید کلید SSH مورد نظرش در سرور شما ثبت باشد، در غیر این صورت این کار اصلا امکان پذیر نیست.

:::note{.danger}
::title[هیچ وقت قانون SSH را حذف نکنید]

هم پچیم و هم شما با استفاده از پورت 22 به سرورتان متصل می‌شوید و اگر به هر دلیلی قانون SSH را حذف کنید این اتصال دچار مشکل می‌شود و دیگر ما در پچیم نمی‌توانیم به سرور شما متصل شویم و شما حتما باید از طریق ارائه کننده سرور اختصاصی یا vps خود پیگیری رفع این مشکل و اضافه کردن پورت 22 به فایروال را انجام دهید.

اگر دسترسی لازم به سرور خود را به هر طریقی پیدا کردید می‌توانید با دستور زیر اجازه دسترسی به پورت 22 را به فایروال خود اضافه کنید البته حتما نیاز به دسترسی `root` خواهید داشت.

```shell
ufw allow 22
```
:::
